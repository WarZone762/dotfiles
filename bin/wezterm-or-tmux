#!/bin/env sh

if [[ $(xdotool search --class wezterm) ]]; then
    tmux-with-config has
    if [[ $? -eq 0 ]]; then
        tmux-with-config switch-client -t $(tmux-with-config new-session -Pd -c "$PWD")
        wmctrl -xa wezterm
    else
        wezterm start --cwd "$PWD"
    fi
else
    tmux-with-config has
    if [[ $? -eq 0 ]]; then
        wezterm start --cwd "$PWD" tmux-with-config -- attach
    else
        wezterm start --cwd "$PWD"
    fi
fi
